#pragma checksum "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "341833b94f40bd4949558f420728bcacc6119cea"
// <auto-generated/>
#pragma warning disable 1591
namespace GameChanger.Pages
{
    #line hidden
    using System.Collections.Generic;
    using System.Linq;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using Microsoft.AspNetCore.Identity;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using MediatR;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using GameChanger.Core.MediatR.Messages.Queries;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using GameChanger.Core.MediatR.Messages;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using GameChanger.Core.MongoDB.Documents;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using Microsoft.AspNetCore.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using GameChanger.GameUser.MediatR.Messages.Queries;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using GameUser.EntityFramework.Domain;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using GameChanger;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using GameChanger.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using System.ComponentModel.DataAnnotations;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using GameChanger.GameUser.EntityFramework;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using GameChanger.GameUser.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 21 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using GameChanger.Core.GameData;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using System;

#line default
#line hidden
#nullable disable
#nullable restore
#line 23 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using System.Threading;

#line default
#line hidden
#nullable disable
#nullable restore
#line 24 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using System.Threading.Tasks;

#line default
#line hidden
#nullable disable
#nullable restore
#line 25 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using GameChanger.Core.EventScheduler;

#line default
#line hidden
#nullable disable
#nullable restore
#line 26 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using GameChanger.Core.MediatR.Messages.Commands.Buildings;

#line default
#line hidden
#nullable disable
#nullable restore
#line 27 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using GameChanger.Core.MediatR.Messages.Commands.Sector;

#line default
#line hidden
#nullable disable
#nullable restore
#line 28 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using GameChanger.Core.MediatR.Messages.Queries.Sector;

#line default
#line hidden
#nullable disable
#nullable restore
#line 29 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using System.Threading.Channels;

#line default
#line hidden
#nullable disable
#nullable restore
#line 30 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using GameChanger.Core.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 31 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using GameChanger.Core.Extensions;

#line default
#line hidden
#nullable disable
#nullable restore
#line 32 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\_Imports.razor"
using GameChanger.Core.MongoDB.Documents.Buildings;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
using Microsoft.AspNetCore.SignalR.Client;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
using GameChanger.Core.SignalR;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/buildings")]
    public partial class Buildings : LayoutComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
#nullable restore
#line 26 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
 foreach(var notification in _notifications)
{

#line default
#line hidden
#nullable disable
            __builder.OpenElement(0, "p");
            __builder.AddContent(1, 
#nullable restore
#line 28 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
         $"Building  {notification.BuildingName} has changed status to: {notification.BuildingStatus}"

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 29 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
}

#line default
#line hidden
#nullable disable
#nullable restore
#line 31 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
 foreach (BuildingTypes buildingType in Enum.GetValues(typeof(BuildingTypes)))
{
    var sectorBuilding = GetBuildingInfoFromSector(buildingType);

    if (sectorBuilding != null)
    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(2, "div");
            __builder.AddAttribute(3, "style", "display:inline-flex;justify-content:center; margin-top: 20px; margin-bottom: 20px; border: groove 1px;");
            __builder.OpenElement(4, "h3");
            __builder.AddContent(5, 
#nullable restore
#line 38 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                 buildingType.ToString()

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(6, "\r\n            <br>");
#nullable restore
#line 41 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
              
                var currentBuildingLvl = sectorBuilding?.CurrentLvl;
                var currentBuildingStatus = sectorBuilding?.Status?.Code;
                var currentLvlBuildingFromConfiguration = GetBuildingInfoFromConfiguration(buildingType, sectorBuilding.CurrentLvl);
                var nextLvlBuildingFromConfiguration = GetBuildingInfoFromConfiguration(buildingType, sectorBuilding.CurrentLvl + 1);

                switch (currentBuildingStatus)
                {
                    case BuildingStatuses.BROKEN:

#line default
#line hidden
#nullable disable
            __builder.OpenElement(7, "button");
            __builder.AddAttribute(8, "id", 
#nullable restore
#line 50 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                      $"{buildingType}_{BuildActions.FIX}"

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(9, "class", "btn btn-warning");
            __builder.AddAttribute(10, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 50 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                                                                               () => PerformBuildingAction(buildingType, BuildActions.FIX, currentBuildingLvl.Value)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(11, "  Fix building ");
            __builder.CloseElement();
#nullable restore
#line 51 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                        break;
                    case BuildingStatuses.BUILDING:

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(12, "<button class=\"btn btn-secondary\" onclick disabled>  Building Now... </button>\r\n                        ");
            __builder.OpenElement(13, "p");
            __builder.AddContent(14, "Time remaining : ");
            __builder.OpenElement(15, "span");
            __builder.AddAttribute(16, "id", 
#nullable restore
#line 54 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                        $"{buildingType}_{currentBuildingStatus}"

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 55 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                        break;
                    case BuildingStatuses.IDLE:

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(17, "<button class=\"btn btn-secondary\" onclick disabled>  Idle... </button>");
#nullable restore
#line 58 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                        break;
                    case BuildingStatuses.FIXING:

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(18, "<button class=\"btn btn-secondary\" onclick disabled>  Fixing ... </button>\r\n                        ");
            __builder.OpenElement(19, "p");
            __builder.AddContent(20, "Time remaining : ");
            __builder.OpenElement(21, "span");
            __builder.AddAttribute(22, "id", 
#nullable restore
#line 61 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                        $"{buildingType}_{currentBuildingStatus}"

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 62 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                        break;
                    case BuildingStatuses.DESTROYING:

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(23, "<button class=\"btn btn-secondary\" onclick disabled>  Demolishing ... </button>\r\n                        ");
            __builder.OpenElement(24, "p");
            __builder.AddContent(25, "Time remaining : ");
            __builder.OpenElement(26, "span");
            __builder.AddAttribute(27, "id", 
#nullable restore
#line 65 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                        $"{buildingType}_{currentBuildingStatus}"

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 66 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                        break;
                    case BuildingStatuses.BUILT:
                        if (nextLvlBuildingFromConfiguration != null)
                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(28, "button");
            __builder.AddAttribute(29, "id", 
#nullable restore
#line 70 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                          $"{buildingType}_{BuildActions.BUILD}"

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(30, "class", "btn btn-success");
            __builder.AddAttribute(31, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 70 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                                                                                     () => PerformBuildingAction(buildingType, BuildActions.BUILD, currentBuildingLvl.Value + 1)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(32, "  Upgrade building ");
            __builder.CloseElement();
#nullable restore
#line 71 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                        }

#line default
#line hidden
#nullable disable
            __builder.OpenElement(33, "button");
            __builder.AddAttribute(34, "id", 
#nullable restore
#line 72 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                      $"{buildingType}_{BuildActions.DESTROY}"

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(35, "class", "btn btn-danger");
            __builder.AddAttribute(36, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 72 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                                                                                  () => PerformBuildingAction(buildingType, BuildActions.DESTROY, currentBuildingLvl.Value)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(37, " Destroy ");
            __builder.CloseElement();
#nullable restore
#line 73 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                        break;
                    default:

#line default
#line hidden
#nullable disable
            __builder.OpenElement(38, "button");
            __builder.AddAttribute(39, "id", 
#nullable restore
#line 75 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                      $"{buildingType}_{BuildActions.BUILD}"

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(40, "class", "btn btn-success");
            __builder.AddAttribute(41, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 75 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                                                                                 () => PerformBuildingAction(buildingType, BuildActions.BUILD, 1)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(42, " Build ");
            __builder.CloseElement();
#nullable restore
#line 76 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                        break;
                }
            

#line default
#line hidden
#nullable disable
            __builder.OpenElement(43, "p");
            __builder.AddMarkupContent(44, "<strong>Name : </strong> ");
            __builder.AddContent(45, 
#nullable restore
#line 83 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                             sectorBuilding.Name

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 84 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"

                if (currentLvlBuildingFromConfiguration != null)
                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(46, "p");
            __builder.AddMarkupContent(47, "<strong>Description: </strong> ");
            __builder.AddContent(48, 
#nullable restore
#line 87 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                       currentLvlBuildingFromConfiguration?.Description

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 88 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                }


#line default
#line hidden
#nullable disable
            __builder.OpenElement(49, "p");
            __builder.AddMarkupContent(50, "<strong>Current Lvl : </strong>");
            __builder.AddContent(51, 
#nullable restore
#line 90 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                   sectorBuilding.CurrentLvl

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(52, "\r\n                ");
            __builder.OpenElement(53, "p");
            __builder.AddMarkupContent(54, "<strong>Status: </strong> ");
            __builder.AddContent(55, 
#nullable restore
#line 91 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                              sectorBuilding.Status.Code

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 92 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"

                if (currentLvlBuildingFromConfiguration != null)
                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(56, "tr");
            __builder.OpenElement(57, "p");
            __builder.AddContent(58, "Time to destroy : ");
            __builder.AddContent(59, 
#nullable restore
#line 95 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                               $"{currentLvlBuildingFromConfiguration?.DestroyTime?.TotalSeconds}s"

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(60, "\r\n                    ");
            __builder.OpenElement(61, "p");
            __builder.AddMarkupContent(62, "<strong>Current Consumption</strong>");
#nullable restore
#line 98 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                         foreach (var resourceAmount in currentLvlBuildingFromConfiguration?.BaseResourceConsumption)
                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(63, "p");
            __builder.OpenElement(64, "p");
            __builder.AddContent(65, 
#nullable restore
#line 100 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                               resourceAmount.Resource

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(66, " : ");
            __builder.AddContent(67, 
#nullable restore
#line 100 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                          resourceAmount.Amount

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 101 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.OpenElement(68, "p");
            __builder.AddMarkupContent(69, "<strong>Current Production</strong>");
#nullable restore
#line 106 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                             foreach (var resourceAmount in currentLvlBuildingFromConfiguration?.BaseResourceProduction)
                            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(70, "p");
            __builder.AddContent(71, 
#nullable restore
#line 108 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                resourceAmount.Resource

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(72, " : ");
            __builder.AddContent(73, 
#nullable restore
#line 108 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                           resourceAmount.Amount

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 109 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                        }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 111 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                        }

                        if (nextLvlBuildingFromConfiguration != null)
                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(74, "p");
            __builder.OpenElement(75, "strong");
            __builder.AddContent(76, "NEXT LEVEL :(");
            __builder.AddContent(77, 
#nullable restore
#line 116 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                       nextLvlBuildingFromConfiguration.Lvl

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(78, ")");
            __builder.CloseElement();
            __builder.AddMarkupContent(79, "\r\n\r\n                                ");
            __builder.OpenElement(80, "p");
            __builder.AddMarkupContent(81, "<strong>Time to build :</strong> ");
            __builder.AddContent(82, 
#nullable restore
#line 118 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                                      $"{nextLvlBuildingFromConfiguration?.BuildTime?.TotalSeconds}s"

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(83, "\r\n                                ");
            __builder.OpenElement(84, "p");
            __builder.AddMarkupContent(85, "<strong>Description: </strong>   ");
            __builder.AddContent(86, 
#nullable restore
#line 119 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                                     nextLvlBuildingFromConfiguration?.Description

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(87, "\r\n                            ");
            __builder.OpenElement(88, "p");
            __builder.AddMarkupContent(89, "<strong>Building Costs</strong>");
#nullable restore
#line 124 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                 foreach (var resourceAmount in nextLvlBuildingFromConfiguration?.BuildCosts)
                                {


#line default
#line hidden
#nullable disable
            __builder.OpenElement(90, "p");
            __builder.AddContent(91, 
#nullable restore
#line 128 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                     resourceAmount.Resource

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(92, " : ");
            __builder.AddContent(93, 
#nullable restore
#line 128 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                                resourceAmount.Amount

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 130 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(94, "\r\n                                ");
            __builder.OpenElement(95, "p");
            __builder.AddMarkupContent(96, "<strong>Consumption</strong>");
#nullable restore
#line 134 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                     foreach (var resourceAmount in nextLvlBuildingFromConfiguration?.BaseResourceConsumption)
                                    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(97, "td");
            __builder.OpenElement(98, "p");
            __builder.AddContent(99, 
#nullable restore
#line 137 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                        resourceAmount.Resource

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(100, " : ");
            __builder.AddContent(101, 
#nullable restore
#line 137 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                                   resourceAmount.Amount

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 138 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.OpenElement(102, "p");
            __builder.AddMarkupContent(103, "<strong>Production</strong>");
#nullable restore
#line 143 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                         foreach (var resourceAmount in nextLvlBuildingFromConfiguration?.BaseResourceProduction)
                                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(104, "p");
            __builder.AddContent(105, 
#nullable restore
#line 145 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                            resourceAmount.Resource

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(106, " : ");
            __builder.AddContent(107, 
#nullable restore
#line 145 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                                       resourceAmount.Amount

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 146 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                        }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 148 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                    }
                                    else
                                    {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(108, "<p>The highest possible building LVL have been achieved.</p>");
#nullable restore
#line 152 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                    }
            

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 155 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
    }
    else
    {
        var nextLvlBuildingFromConfiguration = GetBuildingInfoFromConfiguration(buildingType, 1);
        if (nextLvlBuildingFromConfiguration != null)
        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(109, "div");
            __builder.AddAttribute(110, "style", "display: inline-flex; justify-content: center; margin-top: 20px; margin-bottom: 20px; border: groove 1px;");
            __builder.OpenElement(111, "p");
            __builder.OpenElement(112, "h3");
            __builder.AddContent(113, "Building Type: ");
            __builder.AddContent(114, 
#nullable restore
#line 163 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                       buildingType.ToString()

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(115, "\r\n                ");
            __builder.OpenElement(116, "p");
            __builder.OpenElement(117, "button");
            __builder.AddAttribute(118, "id", 
#nullable restore
#line 166 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                      $"{buildingType}_{BuildActions.BUILD}"

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(119, "class", "btn btn-success");
            __builder.AddAttribute(120, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 166 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                                                                                 () => PerformBuildingAction(buildingType, BuildActions.BUILD, 1)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(121, " Build ");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.OpenElement(122, "p");
            __builder.AddMarkupContent(123, "<strong>Name : </strong> ");
            __builder.AddContent(124, 
#nullable restore
#line 173 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                 nextLvlBuildingFromConfiguration.Name

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(125, "\r\n                    ");
            __builder.OpenElement(126, "p");
            __builder.AddMarkupContent(127, "<strong>Description: </strong> ");
            __builder.AddContent(128, 
#nullable restore
#line 174 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                       nextLvlBuildingFromConfiguration?.Description

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(129, "\r\n                    ");
            __builder.AddMarkupContent(130, "<p><strong>Current Lvl : </strong> 0</p>\r\n                    ");
            __builder.AddMarkupContent(131, "<p><strong>Status: NOT BUILT </strong></p>");
            __builder.OpenElement(132, "p");
            __builder.AddMarkupContent(133, "<strong>NEXT LEVEL </strong> (");
            __builder.AddContent(134, 
#nullable restore
#line 179 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                        nextLvlBuildingFromConfiguration.Lvl

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(135, ")\r\n\r\n                    ");
            __builder.OpenElement(136, "p");
            __builder.AddMarkupContent(137, "<strong>Time to build :</strong> ");
            __builder.AddContent(138, 
#nullable restore
#line 181 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                          $"{nextLvlBuildingFromConfiguration?.BuildTime?.TotalSeconds}s"

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(139, "\r\n                    ");
            __builder.OpenElement(140, "p");
            __builder.AddMarkupContent(141, "<strong>Description: </strong> ");
            __builder.AddContent(142, 
#nullable restore
#line 182 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                       nextLvlBuildingFromConfiguration?.Description

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(143, "\r\n                    ");
            __builder.OpenElement(144, "p");
            __builder.AddMarkupContent(145, "<strong>Building Costs</strong>");
#nullable restore
#line 187 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                         foreach (var resourceAmount in nextLvlBuildingFromConfiguration?.BuildCosts)
                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(146, "p");
            __builder.AddContent(147, 
#nullable restore
#line 190 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                             resourceAmount.Resource

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(148, " : ");
            __builder.AddContent(149, 
#nullable restore
#line 190 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                        resourceAmount.Amount

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 192 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(150, "\r\n                        ");
            __builder.OpenElement(151, "p");
            __builder.AddMarkupContent(152, "<strong>Consumption</strong>");
#nullable restore
#line 196 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                             foreach (var resourceAmount in nextLvlBuildingFromConfiguration?.BaseResourceConsumption)
                            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(153, "td");
            __builder.OpenElement(154, "p");
            __builder.AddContent(155, 
#nullable restore
#line 199 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                resourceAmount.Resource

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(156, " : ");
            __builder.AddContent(157, 
#nullable restore
#line 199 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                           resourceAmount.Amount

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(158, "/s");
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 200 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                        }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.OpenElement(159, "p");
            __builder.AddMarkupContent(160, "<strong>Production</strong>");
#nullable restore
#line 205 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                 foreach (var resourceAmount in nextLvlBuildingFromConfiguration?.BaseResourceProduction)
                                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(161, "p");
            __builder.AddContent(162, 
#nullable restore
#line 207 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                    resourceAmount.Resource

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(163, " : ");
            __builder.AddContent(164, 
#nullable restore
#line 207 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                                                               resourceAmount.Amount

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(165, "/s");
            __builder.CloseElement();
#nullable restore
#line 208 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
                            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 213 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
        }

    }

}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 219 "C:\Users\Piotrek\Documents\GameChanger\BlazorGame\GameChanger\GameChanger\Pages\Buildings.razor"
       
    // var building in CurrentPlayerSector.Buildings
    [CascadingParameter]
    public Task<AuthenticationState> AuthState { get; set; }

    protected List<BuildingDocument> PlayerBuildings { get; set; }
    protected SectorDocument CurrentPlayerSector { get; set; }
    protected PlayerDocument CurrentlyLoggedPlayer { get; set; }
    protected City CurrentCity { get; set; }
    protected Land CurrentLand { get; set; }

    protected HubConnection hubConnection;
    List<NotificationMessage> _notifications = new List<NotificationMessage>();

    protected override async Task OnInitializedAsync()
    {
        hubConnection = new HubConnectionBuilder().WithUrl(NavigationManager.ToAbsoluteUri("/buildingsHub")).Build();

        hubConnection.On<string,string>("BuildingStatusChanged", (buildingCode, buildingStatus) =>
        {
            _notifications.Add(new NotificationMessage
            {
                BuildingName = buildingCode,
                BuildingStatus = buildingStatus,
                MsgId = _notifications.Count() + 1
            });

            InvokeAsync(StateHasChanged);
        });

        await hubConnection.StartAsync();

        await UpdatePageData();
        await base.OnInitializedAsync();
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        CurrentPlayerSector?.Buildings?
            .Where(b => b.Status.Code == BuildingStatuses.DESTROYING || b.Status.Code == BuildingStatuses.FIXING || b.Status.Code == BuildingStatuses.BUILDING)
            .ToList()
            .ForEach(async (b) =>
        await SpawnTimer(b.BuildingType, b.Status.Code, (b.Status as IContinousBuildingStatus).TimeToComplete));

        await base.OnAfterRenderAsync(firstRender);
    }

    protected async Task UpdatePageData()
    {
        var authState = await AuthState;
        var currentUserId = Guid.Parse(authState.User.Claims.Where(c => c.Type == "PlayerGuid").Single().Value);
        CurrentlyLoggedPlayer = await Mediator.Send(new GetPlayerInfoQuery { Id = currentUserId });
        CurrentPlayerSector = await Mediator.Send(new GetSectorInfoQuery { Id = CurrentlyLoggedPlayer.CurrentSector.CurrentSectorId });

        CurrentCity = MapConfiguration.GetCityByCode(CurrentPlayerSector?.CityCode);
        CurrentLand = MapConfiguration.GetLandByCode(CurrentPlayerSector?.LandCode);
    }

    private async Task SpawnTimer(BuildingTypes buildingType, BuildingStatuses buildingStatus, DateTime? dateTimeToFinish)
    {
        var timerItemId = $"{buildingType}_{buildingStatus}";
        await JSRuntime.InvokeVoidAsync("startTimer", dateTimeToFinish, timerItemId);
    }

    protected BuildingDocument GetBuildingInfoFromSector(BuildingTypes buildingType)
    {
        return CurrentPlayerSector?.Buildings?.SingleOrDefault(b => b.BuildingType == buildingType);
    }

    protected async Task<bool> CanPerformBuildOperation(BuildingTypes buildingType)
    {
        await UpdatePageData();

        var building = GetBuildingInfoFromConfiguration(buildingType, 1);

        var currentResources = await Mediator.Send(new GetSectorResourcesQuery { SectorId = CurrentPlayerSector?.Id });
        var hasResourcesToBuild = currentResources?.HasResources(building.BuildCosts);

        return hasResourcesToBuild.HasValue ?
            hasResourcesToBuild.Value : false;
    }

    protected Building GetBuildingInfoFromConfiguration(BuildingTypes buildingType, int lvl)
    {
        return BuildingConfiguration?.Buildings?.SingleOrDefault(b => b.BuildingType == buildingType && b.Lvl == lvl);
    }

    protected async Task PerformBuildingAction(BuildingTypes buildingType, BuildActions buildAction, int buildingLvl)
    {
        await JSRuntime.InvokeVoidAsync("setElementDisabledStatus", $"{buildingType}_{buildAction}", true);

        var buildindInfo = GetBuildingInfoFromConfiguration(buildingType, buildingLvl);
        var sectorBuildingInfo = GetBuildingInfoFromSector(buildingType);

        switch (buildAction)
        {
            case BuildActions.BUILD:
                if (await CanPerformBuildOperation(buildingType) == true)
                {
                    await GameNotificationProcessor.ProcessAsync(new BuildBuildingCommand { BuildingType = buildingType, SectorId = CurrentPlayerSector?.Id, BuildingLvl = buildingLvl, PlayerId = CurrentlyLoggedPlayer?.Id });
                }
                break;
            case BuildActions.DESTROY:
                await GameNotificationProcessor.ProcessAsync(new DemolishBuildingCommand { BuildingType = buildingType, SectorId = CurrentPlayerSector?.Id, PlayerId = CurrentlyLoggedPlayer?.Id });
                break;
            case BuildActions.FIX:
                await GameNotificationProcessor.ProcessAsync(new FixBuildingCommand { BuildingType = buildingType, SectorId = CurrentPlayerSector?.Id, PlayerId = CurrentlyLoggedPlayer?.Id });
                break;
        }

        await UpdatePageData();

        await JSRuntime.InvokeVoidAsync("setElementDisabledStatus", $"{buildingType}_{buildAction}", false);

        await InvokeAsync(StateHasChanged);
    }


#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JSRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavigationManager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private BuildingConfiguration BuildingConfiguration { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private MapConfiguration MapConfiguration { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IEventScheduler EventScheduler { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IGameNotificationProcessor GameNotificationProcessor { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IMediator Mediator { get; set; }
    }
}
#pragma warning restore 1591
